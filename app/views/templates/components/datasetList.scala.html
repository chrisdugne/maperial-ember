@(selection:Boolean = false)
@import views.html.popups.configureRasterWindow; 

<div class="row-fluid">
		
	{{#each dataset in user.datasets}}
		<div class="row-fluid datasetTitle">
			{{#with dataset}}
			<div class="span3 offset2 name">
				<p class="filename">{{name}}</p>
			</div>
			<div class="span1 size">
				<span>{{fileSize size}}</span>
			</div>
			<div class="span1">
				<span>{{separator}}</span>
			</div>
			<div class="span1">
				<span>{{formatDate uploadTime}}</span>
			</div>
			{{/with}}
			<div class="span1 offset2">
			@if(selection){
			}else{
				<button {{action deleteDataset dataset}} class="btn-small btn-danger">
					<i class="icon-trash icon-white"></i>
				</button>
			}
			</div>
		</div>
		{{#each raster in dataset.rasters}}
			<div class="row-fluid">
				{{#with raster}}
					<div class="span3 offset2 name">
						<p class="filename">{{name}}</p>
					</div>
					<div class="span1">
						<span>{{formatDate creationTime}}</span>
					</div>
				{{/with}}
				@if(selection){
					<button class="btn-small btn-success">
						<i class="icon-arrow-right icon-white"></i>
					</button>
				}else{
					<button {{action deleteRaster raster dataset}} class="btn-small btn-danger">
						<i class="icon-trash icon-white"></i>
					</button>
				}
			</div>
		{{/each}} 
		<div class="row-fluid">
			{{bound_equals dataset.rasters.length value='0'
				yes='<div>(No raster)</div>'
				no=''
			}}
		</div>
		<div class="row-fluid">
			<button {{action openConfigureRasterWindow dataset}} class="btn-small btn-success">
				<i class="icon-plus icon-white"></i>
			</button>
		</div>
	{{/each}} 

	{{#each data in datasetsData.filesToUpload}} 
		{{#with data}}
			{{#if data.isUploading}} 
			<div class="row-fluid">
				<div class="span3 offset2 name">
					<p class="filename">{{fileName data}}</p>
				</div>
				{{progressBar data.percentage span="span4"}}
				@if(selection){
					<div class="span1">
						<button class="btn-small btn-success">
							<i class="icon-arrow-right icon-white"></i>
						</button>
					</div>
				}
			</div>
			{{/if}}
		{{/with}} 
	{{/each}}
</div>

<br /> <br />

@configureRasterWindow()